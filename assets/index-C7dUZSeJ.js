import{r as l,aQ as S,j as e,ao as k,ap as N,aq as y,f as n,A as v,ar as E,B as m,aE as D,t as O,T as W,P,h as R,a as F,b as q,c as T,e as t,i as w,aC as A,aR as z,aS as M,aT as Y}from"./index-BBusEcbR.js";function _({open:h,setOpen:x,leadid:i,getTasks:d,opportinityid:u}){const[r,j]=l.useState(""),[c,b]=l.useState(""),o=()=>{x(!1)},[p,f]=l.useState([]);l.useEffect(()=>{S().then(({contacts:a})=>{f(a.map(s=>({id:s.id,label:s.first_name+" "+s.last_name})))}).catch(a=>{alert(a)})},[]);const g=async a=>{try{a.preventDefault();const s=new FormData(a.currentTarget),C=Object.fromEntries(s.entries());C.leadid=i||null,C.opportinityid=u||null;const{msg:B}=await D(C);alert("Task created successfully!"),d(),o()}catch(s){alert(s)}};return e.jsx(l.Fragment,{children:e.jsx(k,{open:h,onClose:o,fullWidth:!0,maxWidth:"xs",className:"create-product-dialog",children:e.jsxs("form",{onSubmit:g,children:[e.jsx(N,{className:"dialog-title",children:"Create Task"}),e.jsxs(y,{children:[e.jsx(n,{id:"standard-multiline-static",name:"subject",label:"Subject",fullWidth:!0,variant:"standard",required:!0,className:"form-field"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(n,{id:"standard-multiline-static",name:"remark",label:"Remarks",multiline:!0,rows:2,fullWidth:!0,variant:"standard",className:"form-field",required:!0}),c!=="Others"&&e.jsxs(e.Fragment,{children:["     ",e.jsx("br",{}),e.jsx("br",{})," ",e.jsx(v,{size:"small",id:"combo-box-demo",value:c,options:p,onChange:(a,s)=>{b(s.label)},renderInput:a=>e.jsx(n,{variant:"standard",name:"contactperson",...a,label:"Contact Person",required:!0}),required:!0,variant:"outlined",className:"form-field"})," "]}),r!=="Others"&&e.jsxs(e.Fragment,{children:["  ",e.jsx("br",{}),e.jsx("br",{})," ",e.jsx(v,{size:"small",id:"combo-box-demo",value:r,options:[{label:"Owner"},{label:"Purchaser"},{label:"Engineer"},{label:"Acounts"},{label:"Others"}],onChange:(a,s)=>{j(s.label)},renderInput:a=>e.jsx(n,{variant:"standard",name:"contactrole",...a,label:"Contact Role",required:!0}),required:!0,variant:"outlined",className:"form-field"})," "]}),r==="Others"&&e.jsxs(e.Fragment,{children:[" ",e.jsx("br",{}),e.jsx("br",{})," ",e.jsx(n,{id:"standard-multiline-static",name:"contactrole",label:"Contact Role",fullWidth:!0,variant:"outlined",className:"form-field",required:!0})," "]}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(v,{size:"small",id:"combo-box-demo",variant:"outlined",className:"form-field",options:[{label:"OPEN"},{label:"INPROGRESS"},{label:"COMPLETED"}],defaultValue:"OPEN",renderInput:a=>e.jsx(n,{variant:"standard",name:"status",...a,label:"Status"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{children:"Follow-up Date"}),e.jsx(n,{margin:"dense",name:"followupdate",id:"followupdate",label:"",type:"date",fullWidth:!0,variant:"outlined",className:"form-field",required:!0})]}),e.jsxs(E,{className:"dialog-actions",children:[e.jsx(m,{variant:"contained",color:"error",onClick:o,className:"dialog-button",children:"Cancel"}),e.jsx(m,{type:"submit",variant:"contained",color:"success",className:"dialog-button",children:"Submit"})]})]})})})}function L({isChild:h,data:x,leadid:i,getTasks:d,opportinityid:u,status:r}){const[j,c]=l.useState(!1),[b,o]=l.useState(!1),[p,f]=l.useState(!1),g=O();return e.jsxs("div",{children:[e.jsxs(W,{component:P,className:"task_table",children:[r!=="TYFCB"&&r!=="CLOSELOST"&&e.jsxs(m,{variant:"contained",color:"primary",className:"add_task","aria-label":"add",onClick:()=>c(!0),children:[e.jsx(R,{})," Add New Task"]}),e.jsxs(F,{"aria-label":"simple table",children:[e.jsx(q,{children:e.jsxs(T,{children:[e.jsx(t,{style:{fontWeight:"bold"},children:"Subject"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Description"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Contact Person"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Contact Role"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Status"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Follow-up Date"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(w,{children:x.map(a=>e.jsxs(T,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(t,{component:"th",scope:"row",children:a.subject}),e.jsx(t,{component:"th",scope:"row",children:a.remark}),e.jsx(t,{component:"th",scope:"row",children:a.contactperson}),e.jsx(t,{component:"th",scope:"row",children:a.contactrole}),e.jsx(t,{component:"th",scope:"row",children:a.status}),e.jsx(t,{component:"th",children:A(a.followupdate).format("DD-MM-YYYY HH:MM")}),e.jsx(t,{children:e.jsx(m,{variant:"contained",size:"xs",color:"primary",align:"right",onClick:()=>{o(!0),f(a)},children:"Edit"})})]},a.name))})]})]}),e.jsx("br",{}),h&&e.jsx("center",{children:e.jsx(z,{label:"See all",size:"small",variant:"contained",color:"primary",onClick:()=>g({pathname:"../task",search:M({leadid:i}).toString()})})}),e.jsx(_,{open:j,setOpen:c,leadid:i,getTasks:d,opportinityid:u}),e.jsx(Y,{open:b,setOpen:o,getTasks:d,task:p})]})}export{L as A};
