import{j as e,T as g,P as f,a as y,b as O,c as p,e as r,i as T,t as C,r as i,ao as F,ap as S,aq as D,f as u,A as E,ar as W,B as m,aW as v,F as I,h as N}from"./index-BBusEcbR.js";import{c as w}from"./Style--b0mMLJA.js";function R(t){const a=C(),{row:s}=t;return i.useEffect(()=>{},[t]),e.jsx(i.Fragment,{children:e.jsxs(p,{sx:{"& > *":{borderBottom:"unset"}},children:[e.jsx(r,{component:"th",scope:"row",children:e.jsx("a",{href:"#",onClick:()=>a(`/user/opprourtinity/${s.id}`),children:s.name})}),e.jsx(r,{align:"center",children:s.status}),e.jsx(r,{align:"center",children:s.description===""?"--":s.description})]})})}function B(t){return e.jsx(g,{component:f,children:e.jsxs(y,{"aria-label":"collapsible table",children:[e.jsx(O,{children:e.jsxs(p,{children:[e.jsx(r,{style:{fontWeight:"bold"},children:"Name"}),e.jsx(r,{align:"center",style:{fontWeight:"bold"},children:"Stage"}),e.jsx(r,{align:"center",style:{fontWeight:"bold"},children:"Description"}),e.jsx(r,{})]})}),e.jsx(T,{children:t.rows.map(a=>e.jsx(R,{row:a,setopen:t.setopen,getOppo:t.getOpportunitiesByAccountId},a.name))})]})})}function A({open:t,setOpen:a,getOppo:s,accountId:o}){const l=sessionStorage.getItem("userId"),c=()=>{a(!1)},[L,h]=i.useState([]),j=async()=>{try{const{leads:n}=await v(l);h(n)}catch(n){alert(n)}};i.useEffect(()=>{j()},[]);const b=async n=>{try{n.preventDefault();const d=new FormData(n.currentTarget),x=Object.fromEntries(d.entries());x.account_id=o;const{msg:k}=await w(x);alert("Opportinity created successfully!"),s(),c()}catch(d){alert(d)}};return e.jsx(i.Fragment,{children:e.jsx(F,{open:t,onClose:c,fullWidth:!0,maxWidth:"xs",className:"create-product-dialog",children:e.jsxs("form",{onSubmit:b,children:[e.jsx(S,{className:"dialog-title",children:"Oppourtinity"}),e.jsxs(D,{children:[e.jsx(u,{autoFocus:!0,margin:"dense",id:"name",name:"name",label:"Oppourtinity Name",type:"text",fullWidth:!0,variant:"standard"}),e.jsx("br",{}),e.jsx(u,{autoFocus:!0,margin:"dense",id:"description",name:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,maxRows:4,variant:"standard"}),e.jsx("br",{}),e.jsx(E,{fullWidth:!0,size:"small",id:"combo-box-demo",options:[{label:"INPROGRESS"},{label:"NEGOTIATION"},{label:"TYFCB"},{label:"CLOSELOST"}],renderInput:n=>e.jsx(u,{variant:"standard",name:"status",...n,label:"Status"})})]}),e.jsxs(W,{children:[e.jsx(m,{variant:"contained",color:"error",onClick:c,children:"Cancel"}),e.jsx(m,{type:"submit",variant:"contained",color:"success",children:"Submit"})]})]})})})}function G({rows:t,getOpportunitiesByAccountId:a,accountId:s}){const[o,l]=i.useState(!1);return i.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[t.length>0&&e.jsx(I,{color:"primary","aria-label":"add",size:"small",style:{float:"right",marginRight:"10px"},onClick:()=>l(!0),children:e.jsx(N,{})}),e.jsx(B,{rows:t,getOpportunitiesByAccountId:a}),e.jsx(A,{open:o,setOpen:l,getOppo:a,accountId:s})]})}export{G as default};
