import{r as m,j as e,C as N,x as W,a6 as k,B as j,h as T,T as D,P as E,a as q,b as U,c as g,e as a,f as i,i as O,ao as P,ap as S,aq as z,ar as v,a7 as R,a5 as w,o as B}from"./index-BBusEcbR.js";import{d as b,a as y}from"./ArrowUpward-CQuDIx7O.js";import{c as F,g as A}from"./product-B9DGzYru.js";const p={name:"",mrp:"",category:"",sku:""};function V(c){const{setOpen:h,setOpenEdit:u,setProduct:s}=c,[l,d]=m.useState([]);m.useEffect(()=>{d(c.rows)},[c]);const n=(t,o)=>{p[o]=t.target.value;const x=c.rows.filter(f=>f.name.toUpperCase().includes(p.name.toUpperCase())&&f.mrp.includes(p.mrp)&&f.category.includes(p.category)&&f.sku.includes(p.sku));d(x)},r=(t,o)=>{const x=l.sort((f,C)=>f[o].toUpperCase()>C[o].toUpperCase()?-t:f[o].toUpperCase()<C[o].toUpperCase()?t:0);d([...x])};return e.jsx(N,{className:"product-table-container",children:e.jsxs(W,{className:"product-table-card",children:[e.jsx(k,{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,children:e.jsxs(j,{variant:"contained",color:"primary","aria-label":"add",onClick:()=>h(!0),children:[e.jsx(T,{})," Add New Product"]})}),e.jsx(D,{component:E,className:"table-container",children:e.jsxs(q,{"aria-label":"product table",children:[e.jsxs(U,{children:[e.jsxs(g,{children:[e.jsxs(a,{children:["Name",e.jsx(b,{fontSize:"inherit",size:"small",onClick:()=>r(-1,"name")}),e.jsx(y,{fontSize:"inherit",size:"small",onClick:()=>r(1,"name")})]}),e.jsxs(a,{children:["Price",e.jsx(b,{fontSize:"inherit",size:"small",onClick:()=>r(-1,"mrp")}),e.jsx(y,{fontSize:"inherit",size:"small",onClick:()=>r(1,"mrp")})]}),e.jsx(a,{children:"Category"}),e.jsxs(a,{children:["SKU",e.jsx(b,{fontSize:"inherit",size:"small",onClick:()=>r(-1,"sku")}),e.jsx(y,{fontSize:"inherit",size:"small",onClick:()=>r(1,"sku")})]}),e.jsx(a,{children:"Action"})]}),e.jsxs(g,{children:[e.jsx(a,{children:e.jsx(i,{size:"small",placeholder:"Filter",onChange:t=>n(t,"name")})}),e.jsx(a,{children:e.jsx(i,{size:"small",placeholder:"Filter",onChange:t=>n(t,"mrp")})}),e.jsx(a,{children:e.jsx(i,{size:"small",placeholder:"Filter",onChange:t=>n(t,"category")})}),e.jsx(a,{children:e.jsx(i,{size:"small",placeholder:"Filter",onChange:t=>n(t,"sku")})}),e.jsx(a,{children:"  "})]})]}),e.jsx(O,{children:l.map(t=>e.jsxs(g,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(a,{component:"th",scope:"row",children:t.name}),e.jsx(a,{children:t.mrp}),e.jsx(a,{children:t.category}),e.jsx(a,{children:t.sku}),e.jsx(a,{children:e.jsx(j,{size:"small",variant:"contained",color:"primary",onClick:()=>{s(t),u(!0)},children:"Edit"})})]},t.name))})]})})]})})}function K({open:c,setOpen:h,getAllProducts:u}){const s=()=>{h(!1)},l=async d=>{d.preventDefault();try{const n=new FormData(d.currentTarget),r=Object.fromEntries(n.entries());await F(r),alert("Product created successfully!"),u(),s()}catch(n){alert(n.message)}};return e.jsx(P,{open:c,onClose:s,fullWidth:!0,maxWidth:"xs",className:"create-product-dialog",children:e.jsxs("form",{onSubmit:l,children:[e.jsx(S,{className:"dialog-title",children:"Create Product"}),e.jsxs(z,{children:[e.jsx(i,{autoFocus:!0,margin:"dense",id:"name",name:"name",label:"Product Name",type:"text",fullWidth:!0,variant:"outlined",required:!0,className:"form-field"}),e.jsx(i,{margin:"dense",id:"mrp",name:"mrp",label:"MRP (in Rs.)",type:"number",fullWidth:!0,variant:"outlined",required:!0,className:"form-field"}),e.jsx(i,{margin:"dense",id:"sku",name:"sku",label:"SKU",type:"text",fullWidth:!0,variant:"outlined",required:!0,className:"form-field"}),e.jsx(i,{margin:"dense",id:"category",name:"category",label:"Category",type:"text",fullWidth:!0,variant:"outlined",required:!0,className:"form-field"})]}),e.jsxs(v,{className:"dialog-actions",children:[e.jsx(j,{variant:"contained",color:"error",onClick:s,className:"dialog-button",children:"Cancel"}),e.jsx(j,{type:"submit",variant:"contained",color:"success",className:"dialog-button",children:"Submit"})]})]})})}function _({open:c,setOpen:h,getAllProducts:u,product:s}){const l=()=>{h(!1)},d=async n=>{try{n.preventDefault();const r=new FormData(n.currentTarget),t=Object.fromEntries(r.entries());t.id=s.id;const{msg:o}=await F(t);alert("Product updated successfully!"),u(),l()}catch(r){alert(r.message)}};return e.jsx(m.Fragment,{children:s&&e.jsx(P,{open:c,onClose:l,fullWidth:!0,maxWidth:"xs",className:"create-product-dialog",children:e.jsxs("form",{onSubmit:d,children:[e.jsx(S,{className:"dialog-title",children:"Edit Product"}),e.jsxs(z,{children:[e.jsx(i,{autoFocus:!0,margin:"dense",id:"name",name:"name",label:"Product Name",type:"text",fullWidth:!0,variant:"outlined",className:"form-field",defaultValue:s.name,required:!0}),e.jsx("br",{}),e.jsx(i,{autoFocus:!0,margin:"dense",id:"mrp",name:"mrp",label:"MRP (in Rs.)",type:"number",fullWidth:!0,variant:"outlined",className:"form-field",defaultValue:s.mrp,required:!0}),e.jsx("br",{}),e.jsx(i,{autoFocus:!0,margin:"dense",id:"sku",name:"sku",label:"SKU",fullWidth:!0,variant:"outlined",className:"form-field",defaultValue:s.sku,required:!0}),e.jsx("br",{}),e.jsx(i,{autoFocus:!0,margin:"dense",id:"category",name:"category",label:"Category",fullWidth:!0,variant:"outlined",className:"form-field",defaultValue:s.category,required:!0})]}),e.jsxs(v,{className:"dialog-actions",children:[e.jsx(j,{variant:"contained",color:"error",onClick:l,className:"dialog-button",children:"Cancel"}),e.jsx(j,{type:"submit",variant:"contained",color:"success",onClick:l,className:"dialog-button",children:"Submit"})]})]})})})}function H(){const c=R({palette:{primary:{main:"#21256C"},secondary:{main:"#e0f7fa"}},typography:{h1:{fontSize:"2.5rem",fontWeight:700,paddingBottom:"3rem"},h3:{fontSize:"2rem",fontWeight:500},h4:{fontSize:"1.25rem",fontWeight:700}}}),[h,u]=m.useState(!1),[s,l]=m.useState(!1),[d,n]=m.useState([]),[r,t]=m.useState(null),o=async()=>{try{const{products:x}=await A();n(x)}catch(x){alert(x)}};return m.useEffect(()=>{o()},[]),e.jsx(w,{theme:c,children:e.jsxs(N,{maxWidth:"xl",className:"product-container",children:[e.jsx(k,{my:4,textAlign:"center",children:e.jsx(B,{variant:"h1",color:"primary",gutterBottom:!0,children:"Products"})}),e.jsx(V,{rows:d,setOpen:u,setOpenEdit:l,setProduct:t}),e.jsx(K,{open:h,setOpen:u,getAllProducts:o}),e.jsx(_,{open:s,setOpen:l,getAllProducts:o,product:r})]})})}export{H as default};
