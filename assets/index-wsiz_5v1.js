import{r as c,j as e,C as f,x as p,a6 as b,B as x,h as y,T as C,P as N,a as U,b as W,c as u,e as t,i as T,f as h,aC as v,k as D,ao as A,ap as S,aq as w,ar as B,a7 as F,a5 as z,o as k}from"./index-BBusEcbR.js";import{b as E,a as q,d as P}from"./user.service-DiCLz2BP.js";const j={name:""};function Y(a){const{setOpen:d}=a,{deleteUser:m}=a,[l,i]=c.useState([]);c.useEffect(()=>{i(a.rows)},[a]);const n=(s,r)=>{j[r]=s.target.value;const o=a.rows.filter(g=>g.name.toUpperCase().includes(j.name.toUpperCase()));i(o)};return e.jsx(f,{className:"product-table-container",children:e.jsxs(p,{className:"product-table-card",children:[e.jsx(b,{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,children:e.jsx(x,{variant:"contained",color:"primary","aria-label":"add",onClick:()=>d(!0),startIcon:e.jsx(y,{}),children:"Add New User"})}),e.jsx(C,{component:N,className:"table-container",children:e.jsxs(U,{"aria-label":"simple table",children:[e.jsx(W,{children:e.jsxs(u,{children:[e.jsx(t,{style:{fontWeight:"bold"},children:"Name"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Contact"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(t,{style:{fontWeight:"bold"},children:"User Name"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Password"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Created At"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsxs(T,{children:[e.jsxs(u,{children:[e.jsx(t,{children:e.jsx(h,{size:"small",placeholder:"Filter",onChange:s=>n(s,"name")})}),e.jsx(t,{}),e.jsx(t,{}),e.jsx(t,{}),e.jsx(t,{}),e.jsx(t,{}),e.jsx(t,{})]}),l.map(s=>e.jsxs(u,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(t,{component:"th",scope:"row",children:s.name}),e.jsx(t,{children:s.contact}),e.jsx(t,{children:s.address}),e.jsx(t,{children:s.username}),e.jsx(t,{children:s.password}),e.jsx(t,{children:v(s.createdAt).format("DD-MM-YYYY")}),e.jsx(t,{children:e.jsxs(x,{size:"small",variant:"contained",className:"delete-btn",onClick:()=>m(s.id),children:[e.jsx(D,{fontSize:"small"})," Delete"]})})]},s.name))]})]})})]})})}function I({open:a,setOpen:d,getUsers:m}){const l=()=>{d(!1)},i=async n=>{try{n.preventDefault();const s=new FormData(n.currentTarget),r=Object.fromEntries(s.entries()),{msg:o}=await E(r);alert("User Added Succesfully!"),m(),l()}catch(s){alert(s)}};return e.jsx(c.Fragment,{children:e.jsx(A,{open:a,onClose:l,fullWidth:!0,maxWidth:"xs",className:"create-product-dialog",children:e.jsxs("form",{autoComplete:"off",onSubmit:i,children:[e.jsx(S,{className:"dialog-title",children:"Create User"}),e.jsxs(w,{children:[e.jsx(h,{autoFocus:!0,name:"name",margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,variant:"outlined",required:!0,className:"form-field"}),e.jsx("br",{}),e.jsx(h,{name:"contact",margin:"dense",id:"contact",label:"Contact",type:"text",fullWidth:!0,variant:"outlined",required:!0,className:"form-field"}),e.jsx("br",{}),e.jsx(h,{name:"address",margin:"dense",id:"address",label:"Address",type:"textarea",fullWidth:!0,variant:"outlined",required:!0,className:"form-field"}),e.jsx("br",{})]}),e.jsxs(B,{className:"dialog-actions",children:[e.jsx(x,{variant:"contained",color:"error",onClick:l,className:"dialog-button",children:"Cancel"}),e.jsx(x,{type:"submit",variant:"contained",color:"success",className:"dialog-button",children:"Submit"})]})]})})})}function M(){const a=F({palette:{primary:{main:"#21256C"},secondary:{main:"#e0f7fa"}},typography:{h1:{fontSize:"2.5rem",fontWeight:700,paddingBottom:"3rem"},h3:{fontSize:"2rem",fontWeight:500},h4:{fontSize:"1.25rem",fontWeight:700}}}),[d,m]=c.useState([]),[l,i]=c.useState(),n=async()=>{try{const{users:r,msg:o}=await q();m(r)}catch(r){alert(r)}},s=async r=>{try{const{msg:o}=await P(r);n()}catch(o){alert(o)}};return c.useEffect(()=>{n()},[]),e.jsx(z,{theme:a,children:e.jsxs(f,{maxWidth:"xl",className:"product-container",children:[e.jsx(b,{my:4,textAlign:"center",children:e.jsx(k,{variant:"h1",color:"primary",gutterBottom:!0,children:"Users"})}),e.jsx(Y,{rows:d,setOpen:i,deleteUser:s}),e.jsx(I,{open:l,setOpen:i,getUsers:n})]})})}export{M as default};
