import{r as h,ad as ge,N as be,ak as ve,ax as X,j as e,_ as z,ay as Ce,az as ye,aA as Ne,aB as Y,a3 as H,a4 as J,C as Q,x as F,a6 as K,B as y,h as Ee,T as ze,P as Se,a as we,b as Te,c as L,e as m,i as We,f as r,t as Ae,aC as w,ao as I,at as Z,o as S,ap as ee,G as u,A as R,ar as B,aD as te,aq as ke,aE as Re,a7 as qe,a5 as De,aF as Le}from"./index-BBusEcbR.js";import{d as q,a as D}from"./ArrowUpward-CQuDIx7O.js";/* empty css              */import{a as Fe}from"./user.service-DiCLz2BP.js";import{A as se,T as ae,M as C}from"./Toolbar-DFVAHk1T.js";import{C as Ie}from"./Checkbox-CtX_rqZn.js";const Be=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function _e(n,i,t){const l=i.getBoundingClientRect(),o=t&&t.getBoundingClientRect(),j=X(i);let f;if(i.fakeTransform)f=i.fakeTransform;else{const s=j.getComputedStyle(i);f=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}let a=0,x=0;if(f&&f!=="none"&&typeof f=="string"){const s=f.split("(")[1].split(")")[0].split(",");a=parseInt(s[4],10),x=parseInt(s[5],10)}return n==="left"?o?`translateX(${o.right+a-l.left}px)`:`translateX(${j.innerWidth+a-l.left}px)`:n==="right"?o?`translateX(-${l.right-o.left-a}px)`:`translateX(-${l.left+l.width-a}px)`:n==="up"?o?`translateY(${o.bottom+x-l.top}px)`:`translateY(${j.innerHeight+x-l.top}px)`:o?`translateY(-${l.top-o.top+l.height-x}px)`:`translateY(-${l.top+l.height-x}px)`}function $e(n){return typeof n=="function"?n():n}function T(n,i,t){const l=$e(t),o=_e(n,i,l);o&&(i.style.webkitTransform=o,i.style.transform=o)}const re=h.forwardRef(function(i,t){const l=ge(),o={enter:l.transitions.easing.easeOut,exit:l.transitions.easing.sharp},j={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:f,appear:a=!0,children:x,container:s,direction:d="down",easing:p=o,in:b,onEnter:W,onEntered:ie,onEntering:O,onExit:P,onExited:V,onExiting:le,style:A,timeout:k=j,TransitionComponent:oe=Ce}=i,de=be(i,Be),v=h.useRef(null),ce=ve(x.ref,v,t),N=c=>g=>{c&&(g===void 0?c(v.current):c(v.current,g))},ue=N((c,g)=>{T(d,c,s),Ne(c),W&&W(c,g)}),me=N((c,g)=>{const G=Y({timeout:k,style:A,easing:p},{mode:"enter"});c.style.webkitTransition=l.transitions.create("-webkit-transform",z({},G)),c.style.transition=l.transitions.create("transform",z({},G)),c.style.webkitTransform="none",c.style.transform="none",O&&O(c,g)}),xe=N(ie),fe=N(le),he=N(c=>{const g=Y({timeout:k,style:A,easing:p},{mode:"exit"});c.style.webkitTransition=l.transitions.create("-webkit-transform",g),c.style.transition=l.transitions.create("transform",g),T(d,c,s),P&&P(c)}),je=N(c=>{c.style.webkitTransition="",c.style.transition="",V&&V(c)}),pe=c=>{f&&f(v.current,c)},M=h.useCallback(()=>{v.current&&T(d,v.current,s)},[d,s]);return h.useEffect(()=>{if(b||d==="down"||d==="right")return;const c=ye(()=>{v.current&&T(d,v.current,s)}),g=X(v.current);return g.addEventListener("resize",c),()=>{c.clear(),g.removeEventListener("resize",c)}},[d,b,s]),h.useEffect(()=>{b||M()},[b,M]),e.jsx(oe,z({nodeRef:v,onEnter:ue,onEntered:xe,onEntering:me,onExit:he,onExited:je,onExiting:fe,addEndListener:pe,appear:a,in:b,timeout:k},de,{children:(c,g)=>h.cloneElement(x,z({ref:ce,style:z({visibility:c==="exited"&&!b?"hidden":void 0},A,x.props.style)},g))}))});var _={},Ue=J;Object.defineProperty(_,"__esModule",{value:!0});var ne=_.default=void 0,Oe=Ue(H()),Pe=e;ne=_.default=(0,Oe.default)((0,Pe.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");sessionStorage.getItem("isAdmin");const E={name:"",source:"",companyname:"",status:"",createdAt:""};function Ve(n){const i=Ae(),{row:t}=n;return e.jsx(h.Fragment,{children:e.jsxs(L,{sx:{"& > *":{borderBottom:"unset"}},children:[e.jsx(m,{component:"th",scope:"row",children:t.name}),e.jsx(m,{align:"center",children:t.source}),e.jsx(m,{align:"center",children:t.companyname}),e.jsx(m,{align:"center",children:t.billingaddress}),e.jsx(m,{align:"center",children:t.renewal?"Y":"N"}),e.jsx(m,{align:"center",children:t.status.toUpperCase()}),e.jsx(m,{align:"center",children:t.createdAt}),e.jsx(m,{align:"center",children:t.status==="CONVERTED"?t.updatedAt:"--"}),e.jsx(m,{children:e.jsx(ne,{onClick:()=>i(`${t.id}`)})})]})})}function Me(n){const[i,t]=h.useState([]),{setopen:l}=n;h.useEffect(()=>{t(n.rows)},[n]);const o=(a,x)=>{E[x]=a.target.value;const s=n.rows.filter(d=>d.name.toUpperCase().includes(E.name.toUpperCase())&&d.source.toUpperCase().includes(E.source.toUpperCase())&&d.companyname.toUpperCase().includes(E.companyname.toUpperCase())&&d.status.toUpperCase().includes(E.status.toUpperCase())&&d.createdAt.includes(E.createdAt));t(s)},j=(a,x)=>{const s=i.sort((d,p)=>d[x].toUpperCase()>p[x].toUpperCase()?-a:d[x].toUpperCase()<p[x].toUpperCase()?a:0);t([...s])},f=a=>{let x;a==1&&(x=i.sort((s,d)=>w(s.createdAt)-w(d.createdAt))),a==-1&&(x=i.sort((s,d)=>w(d.createdAt)-w(s.createdAt))),t([...x])};return e.jsx(Q,{maxWidth:"xl",className:"product-table-container",children:e.jsxs(F,{className:"product-table-card",children:[e.jsx(K,{display:"flex",justifyContent:"end",alignItems:"center",p:2,children:e.jsx(y,{variant:"contained",color:"primary","aria-label":"add",onClick:()=>l(!0),startIcon:e.jsx(Ee,{}),children:"Create New Lead"})}),e.jsx(ze,{component:Se,className:"table-container",children:e.jsxs(we,{"aria-label":"collapsible table",children:[e.jsx(Te,{children:e.jsxs(L,{children:[e.jsxs(m,{children:["Name",e.jsx(q,{fontSize:"inherit",size:"small",onClick:()=>j(-1,"name")}),e.jsx(D,{fontSize:"inherit",size:"small",onClick:()=>j(1,"name")})]}),e.jsx(m,{children:"Source"}),e.jsx(m,{children:"Company Name"}),e.jsx(m,{children:"Address"}),e.jsx(m,{children:"Renewal"}),e.jsxs(m,{children:["Status",e.jsx(q,{fontSize:"inherit",size:"small",onClick:()=>j(-1,"status")}),e.jsx(D,{fontSize:"inherit",size:"small",onClick:()=>j(1,"status")})]}),e.jsxs(m,{children:["Created At",e.jsx(q,{fontSize:"inherit",size:"small",onClick:()=>f(-1)}),e.jsx(D,{fontSize:"inherit",size:"small",onClick:()=>f(1)})]}),e.jsx(m,{children:"Converted At"}),e.jsx(m,{})]})}),e.jsxs(We,{children:[e.jsxs(L,{children:[e.jsx(m,{children:e.jsx(r,{size:"small",placeholder:"Filter",onChange:a=>o(a,"name")})}),e.jsx(m,{children:e.jsx(r,{size:"small",placeholder:"Filter",onChange:a=>o(a,"source")})}),e.jsx(m,{children:e.jsx(r,{size:"small",placeholder:"Filter",onChange:a=>o(a,"companyname")})}),e.jsx(m,{}),e.jsx(m,{}),e.jsx(m,{children:e.jsx(r,{size:"small",placeholder:"Filter",onChange:a=>o(a,"status")})}),e.jsx(m,{children:e.jsx(r,{size:"small",placeholder:"Filter",onChange:a=>o(a,"createdAt")})}),e.jsx(m,{}),e.jsx(m,{})]}),i.map(a=>e.jsx(Ve,{row:a,setopen:n.setopenedit,setopentask:n.setopentask,setleadid:n.setleadid,getAllLeads:n.getAllLeads},a.name))]})]})})]})})}var $={},Ge=J;Object.defineProperty($,"__esModule",{value:!0});var U=$.default=void 0,Ye=Ge(H()),Xe=e;U=$.default=(0,Ye.default)((0,Xe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const He=h.forwardRef(function(i,t){return e.jsx(re,{direction:"up",ref:t,...i})}),Je=sessionStorage.getItem("isAdmin")==="true";function Qe({open:n,setopen:i,getAllLeads:t}){const[l,o]=h.useState([]),[j,f]=h.useState(null);h.useEffect(()=>{Fe().then(({users:s,msg:d})=>{s.push({name:"UNASSIGNED",id:-1}),o(s.map(p=>({label:p.name,id:p.id})))}).catch(s=>{alert(s)})},[]);const a=()=>{i(!1)},x=async s=>{s.preventDefault();try{const d=new FormData(s.currentTarget),p=Object.fromEntries(d.entries());p.scoring=p.scoring||0,p.ownerid=j||+sessionStorage.getItem("userId"),await te(p),alert("Lead created successfully!"),t(),a()}catch(d){alert(d)}};return e.jsx(h.Fragment,{children:e.jsxs(I,{fullScreen:!0,open:n,onClose:a,TransitionComponent:He,className:"create-lead-dialog",children:[e.jsx(se,{sx:{position:"relative"},className:"app-bar",children:e.jsxs(ae,{children:[e.jsx(Z,{edge:"start",color:"inherit",onClick:a,"aria-label":"close",children:e.jsx(U,{})}),e.jsx(S,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Lead Creation"})]})}),e.jsxs(F,{className:"form-card",children:[e.jsx(ee,{className:"dialog-title",children:"Lead Information"}),e.jsxs("form",{autoComplete:"off",onSubmit:x,children:[e.jsxs(u,{container:!0,spacing:3,className:"form-grid",children:[e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"firstname",label:"First Name",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"lastname",label:"Last Name",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"source",label:"Source",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"companyname",label:"Company Name",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"billingaddress",label:"Billing Address",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"shippingaddress",label:"Shipping Address",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,multiline:!0,maxRows:4,name:"description",label:"Description",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"intrestedon",label:"Interested On",variant:"outlined",className:"form-field",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(R,{fullWidth:!0,size:"small",options:[{label:"HOT"},{label:"COLD"},{label:"OPEN"},{label:"ASSIGNED"},{label:"CONVERTED"}],renderInput:s=>e.jsx(r,{...s,variant:"outlined",name:"status",label:"Status",required:!0}),className:"form-field"})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(R,{fullWidth:!0,size:"small",options:[{label:"Good Referral"},{label:"BAD Referral"}],renderInput:s=>e.jsx(r,{...s,variant:"outlined",name:"quality",label:"Quality",required:!0}),className:"form-field"})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,type:"number",name:"scoring",label:"Scoring",variant:"outlined",className:"form-field",size:"small"})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,type:"email",name:"email",label:"Email",variant:"outlined",className:"form-field",size:"small"})}),Je&&e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(R,{fullWidth:!0,size:"small",options:l,onChange:(s,d)=>f(d.id),renderInput:s=>e.jsx(r,{...s,variant:"outlined",label:"Owner",required:!0}),className:"form-field"})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,type:"tel",name:"mobileno",label:"Mobile No.",variant:"outlined",className:"form-field",size:"small",required:!0})})]}),e.jsxs(B,{className:"dialog-actions",children:[e.jsx(y,{variant:"contained",color:"error",onClick:a,className:"dialog-button",children:"Cancel"}),e.jsx(y,{type:"submit",variant:"contained",color:"success",className:"dialog-button",children:"Submit"})]})]})]})]})})}const Ke=h.forwardRef(function(i,t){return e.jsx(re,{direction:"up",ref:t,...i})});function Ze({open:n,setopen:i}){const t=()=>{i(!1)},l=async o=>{o.preventDefault();try{const j=new FormData(o.currentTarget),f=Object.fromEntries(j.entries());f.isrenewal=f.isrenewal==="on",await te(f),alert("Lead updated successfully!"),t()}catch(j){alert(j)}};return e.jsx(h.Fragment,{children:e.jsxs(I,{fullScreen:!0,open:n,onClose:t,TransitionComponent:Ke,className:"edit-lead-dialog",children:[e.jsx(se,{sx:{position:"relative"},className:"app-bar",children:e.jsxs(ae,{children:[e.jsx(Z,{edge:"start",color:"inherit",onClick:t,"aria-label":"close",children:e.jsx(U,{})}),e.jsx(S,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Edit Lead"})]})}),e.jsxs(F,{className:"form-card",children:[e.jsx(S,{variant:"h4",className:"dialog-title",gutterBottom:!0,children:"Lead Information"}),e.jsxs("form",{autoComplete:"off",onSubmit:l,className:"form",children:[e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"firstname",label:"First Name",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"lastname",label:"Last Name",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"source",label:"Source",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"companyname",label:"Company Name",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"websiteurl",label:"Website",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"billingaddress",label:"Billing Address",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"shippingaddress",label:"Shipping Address",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"description",label:"Description",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,name:"intrestedon",label:"Interested On",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(r,{select:!0,fullWidth:!0,name:"status",label:"Status",variant:"outlined",size:"small",required:!0,children:[e.jsx(C,{value:"assigned",children:"Assigned"}),e.jsx(C,{value:"cold",children:"Cold"}),e.jsx(C,{value:"hot",children:"Hot"}),e.jsx(C,{value:"converted",children:"Converted"})]})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(r,{select:!0,fullWidth:!0,name:"quality",label:"Quality",variant:"outlined",size:"small",required:!0,children:[e.jsx(C,{value:"Good Referral",children:"Good Referral"}),e.jsx(C,{value:"Bad Referral",children:"Bad Referral"})]})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsx(r,{fullWidth:!0,type:"number",name:"score",label:"Scoring",variant:"outlined",size:"small",required:!0})}),e.jsx(u,{item:!0,xs:12,sm:6,children:e.jsxs(r,{select:!0,fullWidth:!0,name:"ownerid",label:"Assignee",variant:"outlined",size:"small",required:!0,children:[e.jsx(C,{value:1,children:"Vijay"}),e.jsx(C,{value:2,children:"Anuj"})]})}),e.jsxs(u,{item:!0,xs:12,children:[e.jsx(Ie,{name:"isrenewal",color:"primary"}),"Do You Want to Renew?"]})]}),e.jsxs(B,{className:"dialog-actions",children:[e.jsx(y,{variant:"contained",color:"error",onClick:t,className:"dialog-button",children:"Cancel"}),e.jsx(y,{type:"submit",variant:"contained",color:"success",className:"dialog-button",children:"Save"})]})]})]})]})})}function et(n){const i=()=>{n.setopentask(!1)},t=async l=>{try{l.preventDefault();const o=new FormData(l.currentTarget),j=Object.fromEntries(o.entries());j.leadid=n.leadid;const{msg:f}=await Re(j);alert(f),i(),window.location.reload()}catch(o){alert(o)}};return e.jsx(h.Fragment,{children:e.jsx(I,{open:n.open,onClose:i,fullWidth:!0,maxWidth:"xs",className:"create-product-dialog",children:e.jsxs("form",{onSubmit:t,children:[e.jsx(ee,{className:"dialog-title",children:"Create Task"}),e.jsxs(ke,{children:[e.jsx("br",{}),e.jsx(r,{autoFocus:!0,id:"outlined-multiline-static",label:"Remarks",name:"remark",multiline:!0,rows:2,variant:"outlined",className:"form-field",fullWidth:!0,gutterBottom:!0}),e.jsx("br",{}),"    ",e.jsx("br",{}),e.jsx(S,{variant:"h7",color:"primary",gutterBottom:!0,children:"Follow-up Date "}),e.jsx("br",{}),e.jsx(r,{margin:"dense",id:"name",name:"followupdate",type:"date",fullWidth:!0,variant:"outlined",className:"form-field"})]}),e.jsxs(B,{className:"dialog-actions",children:[e.jsx(y,{onClick:i,variant:"contained",color:"warning",className:"dialog-button",children:"Cancel"}),e.jsx(y,{type:"submit",variant:"contained",color:"success",className:"dialog-button",children:"Submit"})]})]})})})}function lt(){const n=qe({palette:{primary:{main:"#21256C"},secondary:{main:"#e0f7fa"}},typography:{h1:{fontSize:"2.5rem",fontWeight:700,paddingBottom:"3rem"},h3:{fontSize:"2rem",fontWeight:500},h4:{fontSize:"1.25rem",fontWeight:700}}}),[i,t]=h.useState(!1),[l,o]=h.useState(!1),[j,f]=h.useState(!1),[a,x]=h.useState(null),[s,d]=h.useState([]),p=async()=>{try{const{leads:b,msg:W}=await Le();d(b)}catch(b){alert(b.message)}};return h.useEffect(()=>{p()},[]),e.jsx(De,{theme:n,children:e.jsxs(Q,{maxWidth:"xl",className:"product-container",children:[e.jsx(K,{my:4,textAlign:"center",children:e.jsx(S,{variant:"h1",color:"primary",gutterBottom:!0,children:"All Leads"})}),e.jsx(Qe,{open:i,setopen:t,getAllLeads:p}),e.jsx(Ze,{open:l,setopen:o,getAllLeads:p}),e.jsx(Me,{rows:s,setopen:t,setopenedit:o,setopentask:f,setleadid:x,getAllLeads:p}),e.jsx(et,{open:j,setopentask:f,leadid:a})]})})}export{lt as default};
